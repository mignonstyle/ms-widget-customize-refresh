/**
 * Name        : widget-media-uploader
 * Author      : Mignon Style
 * License     : GPLv2 or later
 * License URI : http://www.gnu.org/licenses/gpl-2.0.html
 * Version     : 0.1
 */
jQuery(function(t){function e(){t(document).on("click",".widget-upload-button",function(e){if(t(".widget-media-upload").size()&&t(".widget-media-upload").removeClass("upload-select"),t(e.target).closest(".widget-media-upload")){var i=t(e.target).closest(".widget-media-upload");i=i.addClass("upload-select"),o(e,i)}}),t(document).on("click",".widget-remove-button",function(e){if(e.preventDefault(),e.stopPropagation(),t(e.target).closest(".widget-media-upload")){var o=t(e.target).closest(".widget-media-upload");i(o)}})}function o(e,o){return e.preventDefault(),s?void s.open():(s=wp.media({title:widget_media_text.title,library:{type:"image"},button:{text:widget_media_text.button,close:!1},multiple:!1}),s.on("select",function(){var e=s.state().get("selection").first();s.close();var i=t(".upload-select").attr("ID");o=t("#"+i),"image"==e.attributes.type&&(a(o),t("input.widget-image-url",o).val(e.attributes.url),t(".widget-upload-preview",o).append('<img src="'+e.attributes.url+'" class="widget-preview-image" alt="'+e.attributes.title+'" />'),t(".widget-remove-button",o).removeClass("contents-hide").addClass("contents-show"),t(o).next(".contents-thumb-settings").length&&t(o).next(".contents-thumb-settings").removeClass("form-close").addClass("form-open"))}),void s.open())}function i(e){var e=t("#"+e.attr("ID"));a(e),t(".widget-remove-button",e).removeClass("contents-show").addClass("contents-hide"),t(e).next(".contents-thumb-settings").length&&t(e).next(".contents-thumb-settings").removeClass("form-open").addClass("form-close")}function a(e,o){t("input.widget-image-url",e).val(""),t(".widget-upload-preview",e).empty()}var s;e()});